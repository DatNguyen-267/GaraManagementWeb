<link rel="stylesheet" href="/css/customer-history.css">
<div class="container__customer-history">
  <div class="header__breadcrumb">
      <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="#">Lịch sử dịch vụ</a></li>
          </ol>
      </nav>
  </div>
  <div class="ctner__customer-history">
    <div class="toolbar">
      <div class="toolbar__search">
        <input type="text" class="toolbar__search-input" id="search-input"
          placeholder="Tìm kiếm thông tin khách hàng...">
        <span class="ti-search toolbar__search-icon"></span>

      </div>
      {{!-- <div class="dropdown toolbar__filter">
        <button class=" btn dropdown-toggle toolbar__filter-btn" type="button" id="dropdownMenuButton"
          data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">

        </button>
        <div class="toolbar__filter-menu dropdown-menu" aria-labelledby="dropdownMenuButton">
          <a class="toolbar__filter-item dropdown-item" href="#"></a>
          <a class="toolbar__filter-item dropdown-item" href="#"></a>
          <a class="toolbar__filter-item dropdown-item" href="#"></a>
        </div>
      </div> --}}
    </div>
    <div class="list-customer-history">
      <table class="table table--default">
        <thead class="thead-dark">
          <tr>
            <th scope="col">#STT</th>
            <th scope="col">Họ và tên</th>
            <th scope="col">CMND</th>
            <th scope="col">Email</th>
            <th scope="col">Số điện thoại</th>
            <th scope="col">Số tiền nợ</th>
            <th scope="col">Lần giao dịch</th>
            <th scope="col" colspan="2"></th>
          </tr>
        </thead>
        <tbody id="table-body">
          {{#each listhistory}}
          <tr data-id="{{this._id}}">
            <th scope="row">{{@index}}</th>
            <td>{{this.name}}</td>
            <td>{{this.cardIdentify}}</td>
            <td>{{this.email}}</td>
            <td>{{this.phone}}</td>
            <td>{{this.debt}}</td>
            <td>{{this.number_of_reception}}</td>
            <td></td>
            <td>
              <button class="btn--view-item" data-id="{{this._id}}">Xem</button>
            </td>
          </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
  </div>
</div>

<form method="GET" name="form-view"></form>
<!-- scrip -->

{{!-- --}}
<script>
  document.addEventListener('DOMContentLoaded', function () {

    var btnView = $('.btn--view-item')
    var formView = document.forms['form-view']
    //Search
    $(document).ready(function () {
    $('#search-input').on('keyup', function (event) {
      event.preventDefault();
      /* Act on the event */
      var keyword = $(this).val().toLowerCase();
      $('#table-body tr').filter(function () {
        $(this).toggle($(this).text().toLowerCase().indexOf(keyword) > -1);
      });
    });
  });
    btnView.click(function(){
      formView.action = 'customerhistory/' + $(this).data('id') + '/customerhistorydetail'
      formView.submit()
    })
  })
</script>